# Generated by Django 5.0.2 on 2024-07-10 13:14

import common.validators
import django.core.validators
import django.db.models.deletion
import recipes.utils
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        (
            "ingredients",
            "0002_category_alter_ingredient_name_alter_ingredient_sort_and_more",
        ),
        ("measurements", "0002_alter_measurement_abbreviation_and_more"),
        ("recipes", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name="Category",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, verbose_name="Дата создания"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(auto_now=True, verbose_name="Дата обновления"),
                ),
                (
                    "name",
                    models.CharField(
                        default="Без категории",
                        max_length=100,
                        unique=True,
                        validators=[
                            django.core.validators.MinLengthValidator(2),
                            common.validators.AcceptedSymbolsValidator(
                                {
                                    "'",
                                    " ",
                                    "!",
                                    '"',
                                    "%",
                                    "(",
                                    ")",
                                    "*",
                                    "+",
                                    ",",
                                    "-",
                                    ".",
                                    "/",
                                    "0",
                                    "1",
                                    "2",
                                    "3",
                                    "4",
                                    "5",
                                    "6",
                                    "7",
                                    "8",
                                    "9",
                                    ":",
                                    ";",
                                    "?",
                                    "A",
                                    "B",
                                    "C",
                                    "D",
                                    "E",
                                    "F",
                                    "G",
                                    "H",
                                    "I",
                                    "J",
                                    "K",
                                    "L",
                                    "M",
                                    "N",
                                    "O",
                                    "P",
                                    "Q",
                                    "R",
                                    "S",
                                    "T",
                                    "U",
                                    "V",
                                    "W",
                                    "X",
                                    "Y",
                                    "Z",
                                    "\\",
                                    "a",
                                    "b",
                                    "c",
                                    "d",
                                    "e",
                                    "f",
                                    "g",
                                    "h",
                                    "i",
                                    "j",
                                    "k",
                                    "l",
                                    "m",
                                    "n",
                                    "o",
                                    "p",
                                    "q",
                                    "r",
                                    "s",
                                    "t",
                                    "u",
                                    "v",
                                    "w",
                                    "x",
                                    "y",
                                    "z",
                                    "«",
                                    "°",
                                    "»",
                                    "¼",
                                    "½",
                                    "Ё",
                                    "А",
                                    "Б",
                                    "В",
                                    "Г",
                                    "Д",
                                    "Е",
                                    "Ж",
                                    "З",
                                    "И",
                                    "Й",
                                    "К",
                                    "Л",
                                    "М",
                                    "Н",
                                    "О",
                                    "П",
                                    "Р",
                                    "С",
                                    "Т",
                                    "У",
                                    "Ф",
                                    "Х",
                                    "Ц",
                                    "Ч",
                                    "Ш",
                                    "Щ",
                                    "Ъ",
                                    "Ы",
                                    "Ь",
                                    "Э",
                                    "Ю",
                                    "Я",
                                    "а",
                                    "б",
                                    "в",
                                    "г",
                                    "д",
                                    "е",
                                    "ж",
                                    "з",
                                    "и",
                                    "й",
                                    "к",
                                    "л",
                                    "м",
                                    "н",
                                    "о",
                                    "п",
                                    "р",
                                    "с",
                                    "т",
                                    "у",
                                    "ф",
                                    "х",
                                    "ц",
                                    "ч",
                                    "ш",
                                    "щ",
                                    "ъ",
                                    "ы",
                                    "ь",
                                    "э",
                                    "ю",
                                    "я",
                                    "ё",
                                    "–",
                                    "—",
                                    "№",
                                }
                            ),
                        ],
                        verbose_name="Категория",
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        null=True,
                        validators=[
                            django.core.validators.MinLengthValidator(10),
                            django.core.validators.MaxLengthValidator(500),
                            common.validators.AcceptedSymbolsValidator(
                                {
                                    "'",
                                    " ",
                                    "!",
                                    '"',
                                    "%",
                                    "(",
                                    ")",
                                    "*",
                                    "+",
                                    ",",
                                    "-",
                                    ".",
                                    "/",
                                    "0",
                                    "1",
                                    "2",
                                    "3",
                                    "4",
                                    "5",
                                    "6",
                                    "7",
                                    "8",
                                    "9",
                                    ":",
                                    ";",
                                    "?",
                                    "A",
                                    "B",
                                    "C",
                                    "D",
                                    "E",
                                    "F",
                                    "G",
                                    "H",
                                    "I",
                                    "J",
                                    "K",
                                    "L",
                                    "M",
                                    "N",
                                    "O",
                                    "P",
                                    "Q",
                                    "R",
                                    "S",
                                    "T",
                                    "U",
                                    "V",
                                    "W",
                                    "X",
                                    "Y",
                                    "Z",
                                    "\\",
                                    "a",
                                    "b",
                                    "c",
                                    "d",
                                    "e",
                                    "f",
                                    "g",
                                    "h",
                                    "i",
                                    "j",
                                    "k",
                                    "l",
                                    "m",
                                    "n",
                                    "o",
                                    "p",
                                    "q",
                                    "r",
                                    "s",
                                    "t",
                                    "u",
                                    "v",
                                    "w",
                                    "x",
                                    "y",
                                    "z",
                                    "«",
                                    "°",
                                    "»",
                                    "¼",
                                    "½",
                                    "Ё",
                                    "А",
                                    "Б",
                                    "В",
                                    "Г",
                                    "Д",
                                    "Е",
                                    "Ж",
                                    "З",
                                    "И",
                                    "Й",
                                    "К",
                                    "Л",
                                    "М",
                                    "Н",
                                    "О",
                                    "П",
                                    "Р",
                                    "С",
                                    "Т",
                                    "У",
                                    "Ф",
                                    "Х",
                                    "Ц",
                                    "Ч",
                                    "Ш",
                                    "Щ",
                                    "Ъ",
                                    "Ы",
                                    "Ь",
                                    "Э",
                                    "Ю",
                                    "Я",
                                    "а",
                                    "б",
                                    "в",
                                    "г",
                                    "д",
                                    "е",
                                    "ж",
                                    "з",
                                    "и",
                                    "й",
                                    "к",
                                    "л",
                                    "м",
                                    "н",
                                    "о",
                                    "п",
                                    "р",
                                    "с",
                                    "т",
                                    "у",
                                    "ф",
                                    "х",
                                    "ц",
                                    "ч",
                                    "ш",
                                    "щ",
                                    "ъ",
                                    "ы",
                                    "ь",
                                    "э",
                                    "ю",
                                    "я",
                                    "ё",
                                    "–",
                                    "—",
                                    "№",
                                }
                            ),
                        ],
                        verbose_name="Описание",
                    ),
                ),
            ],
            options={
                "verbose_name": "Категория",
                "verbose_name_plural": "Категории",
                "ordering": ["name"],
            },
        ),
        migrations.AlterField(
            model_name="recipe",
            name="complexity",
            field=models.PositiveSmallIntegerField(
                validators=[
                    django.core.validators.MinValueValidator(1),
                    django.core.validators.MaxValueValidator(3),
                ],
                verbose_name="Сложность готовки",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="cooking_time",
            field=models.PositiveSmallIntegerField(
                validators=[
                    django.core.validators.MinValueValidator(1),
                    django.core.validators.MaxValueValidator(5999),
                ],
                verbose_name="Общее время готовки",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="cover_path",
            field=models.ImageField(
                upload_to=recipes.utils.get_recipe_image_upload_path,
                verbose_name="Главное фото",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="description",
            field=models.TextField(
                null=True,
                validators=[
                    django.core.validators.MinLengthValidator(10),
                    django.core.validators.MaxLengthValidator(500),
                    common.validators.AcceptedSymbolsValidator(
                        {
                            "'",
                            " ",
                            "!",
                            '"',
                            "%",
                            "(",
                            ")",
                            "*",
                            "+",
                            ",",
                            "-",
                            ".",
                            "/",
                            "0",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            ":",
                            ";",
                            "?",
                            "A",
                            "B",
                            "C",
                            "D",
                            "E",
                            "F",
                            "G",
                            "H",
                            "I",
                            "J",
                            "K",
                            "L",
                            "M",
                            "N",
                            "O",
                            "P",
                            "Q",
                            "R",
                            "S",
                            "T",
                            "U",
                            "V",
                            "W",
                            "X",
                            "Y",
                            "Z",
                            "\\",
                            "a",
                            "b",
                            "c",
                            "d",
                            "e",
                            "f",
                            "g",
                            "h",
                            "i",
                            "j",
                            "k",
                            "l",
                            "m",
                            "n",
                            "o",
                            "p",
                            "q",
                            "r",
                            "s",
                            "t",
                            "u",
                            "v",
                            "w",
                            "x",
                            "y",
                            "z",
                            "«",
                            "°",
                            "»",
                            "¼",
                            "½",
                            "Ё",
                            "А",
                            "Б",
                            "В",
                            "Г",
                            "Д",
                            "Е",
                            "Ж",
                            "З",
                            "И",
                            "Й",
                            "К",
                            "Л",
                            "М",
                            "Н",
                            "О",
                            "П",
                            "Р",
                            "С",
                            "Т",
                            "У",
                            "Ф",
                            "Х",
                            "Ц",
                            "Ч",
                            "Ш",
                            "Щ",
                            "Ъ",
                            "Ы",
                            "Ь",
                            "Э",
                            "Ю",
                            "Я",
                            "а",
                            "б",
                            "в",
                            "г",
                            "д",
                            "е",
                            "ж",
                            "з",
                            "и",
                            "й",
                            "к",
                            "л",
                            "м",
                            "н",
                            "о",
                            "п",
                            "р",
                            "с",
                            "т",
                            "у",
                            "ф",
                            "х",
                            "ц",
                            "ч",
                            "ш",
                            "щ",
                            "ъ",
                            "ы",
                            "ь",
                            "э",
                            "ю",
                            "я",
                            "ё",
                            "–",
                            "—",
                            "№",
                        }
                    ),
                ],
                verbose_name="Описание",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="oven_time",
            field=models.PositiveSmallIntegerField(
                validators=[
                    django.core.validators.MinValueValidator(1),
                    django.core.validators.MaxValueValidator(5999),
                ],
                verbose_name="Время активной готовки",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="quantity",
            field=models.PositiveSmallIntegerField(
                validators=[
                    django.core.validators.MinValueValidator(1),
                    django.core.validators.MaxValueValidator(10),
                ],
                verbose_name="Количество порций",
            ),
        ),
        migrations.AlterField(
            model_name="recipe",
            name="title",
            field=models.CharField(
                max_length=100,
                validators=[
                    django.core.validators.MinLengthValidator(2),
                    common.validators.AcceptedSymbolsValidator(
                        {
                            "'",
                            " ",
                            "!",
                            '"',
                            "%",
                            "(",
                            ")",
                            "*",
                            "+",
                            ",",
                            "-",
                            ".",
                            "/",
                            "0",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            ":",
                            ";",
                            "?",
                            "A",
                            "B",
                            "C",
                            "D",
                            "E",
                            "F",
                            "G",
                            "H",
                            "I",
                            "J",
                            "K",
                            "L",
                            "M",
                            "N",
                            "O",
                            "P",
                            "Q",
                            "R",
                            "S",
                            "T",
                            "U",
                            "V",
                            "W",
                            "X",
                            "Y",
                            "Z",
                            "\\",
                            "a",
                            "b",
                            "c",
                            "d",
                            "e",
                            "f",
                            "g",
                            "h",
                            "i",
                            "j",
                            "k",
                            "l",
                            "m",
                            "n",
                            "o",
                            "p",
                            "q",
                            "r",
                            "s",
                            "t",
                            "u",
                            "v",
                            "w",
                            "x",
                            "y",
                            "z",
                            "«",
                            "°",
                            "»",
                            "¼",
                            "½",
                            "Ё",
                            "А",
                            "Б",
                            "В",
                            "Г",
                            "Д",
                            "Е",
                            "Ж",
                            "З",
                            "И",
                            "Й",
                            "К",
                            "Л",
                            "М",
                            "Н",
                            "О",
                            "П",
                            "Р",
                            "С",
                            "Т",
                            "У",
                            "Ф",
                            "Х",
                            "Ц",
                            "Ч",
                            "Ш",
                            "Щ",
                            "Ъ",
                            "Ы",
                            "Ь",
                            "Э",
                            "Ю",
                            "Я",
                            "а",
                            "б",
                            "в",
                            "г",
                            "д",
                            "е",
                            "ж",
                            "з",
                            "и",
                            "й",
                            "к",
                            "л",
                            "м",
                            "н",
                            "о",
                            "п",
                            "р",
                            "с",
                            "т",
                            "у",
                            "ф",
                            "х",
                            "ц",
                            "ч",
                            "ш",
                            "щ",
                            "ъ",
                            "ы",
                            "ь",
                            "э",
                            "ю",
                            "я",
                            "ё",
                            "–",
                            "—",
                            "№",
                        }
                    ),
                ],
                verbose_name="Название",
            ),
        ),
        migrations.AlterField(
            model_name="recipeingredient",
            name="volume",
            field=models.DecimalField(
                decimal_places=2,
                default=1.0,
                max_digits=6,
                validators=[django.core.validators.MinValueValidator(Decimal("0.1"))],
                verbose_name="Количество",
            ),
        ),
        migrations.AlterField(
            model_name="recipestep",
            name="description",
            field=models.TextField(
                validators=[
                    django.core.validators.MinLengthValidator(10),
                    django.core.validators.MaxLengthValidator(500),
                    common.validators.AcceptedSymbolsValidator(
                        {
                            "'",
                            " ",
                            "!",
                            '"',
                            "%",
                            "(",
                            ")",
                            "*",
                            "+",
                            ",",
                            "-",
                            ".",
                            "/",
                            "0",
                            "1",
                            "2",
                            "3",
                            "4",
                            "5",
                            "6",
                            "7",
                            "8",
                            "9",
                            ":",
                            ";",
                            "?",
                            "A",
                            "B",
                            "C",
                            "D",
                            "E",
                            "F",
                            "G",
                            "H",
                            "I",
                            "J",
                            "K",
                            "L",
                            "M",
                            "N",
                            "O",
                            "P",
                            "Q",
                            "R",
                            "S",
                            "T",
                            "U",
                            "V",
                            "W",
                            "X",
                            "Y",
                            "Z",
                            "\\",
                            "a",
                            "b",
                            "c",
                            "d",
                            "e",
                            "f",
                            "g",
                            "h",
                            "i",
                            "j",
                            "k",
                            "l",
                            "m",
                            "n",
                            "o",
                            "p",
                            "q",
                            "r",
                            "s",
                            "t",
                            "u",
                            "v",
                            "w",
                            "x",
                            "y",
                            "z",
                            "«",
                            "°",
                            "»",
                            "¼",
                            "½",
                            "Ё",
                            "А",
                            "Б",
                            "В",
                            "Г",
                            "Д",
                            "Е",
                            "Ж",
                            "З",
                            "И",
                            "Й",
                            "К",
                            "Л",
                            "М",
                            "Н",
                            "О",
                            "П",
                            "Р",
                            "С",
                            "Т",
                            "У",
                            "Ф",
                            "Х",
                            "Ц",
                            "Ч",
                            "Ш",
                            "Щ",
                            "Ъ",
                            "Ы",
                            "Ь",
                            "Э",
                            "Ю",
                            "Я",
                            "а",
                            "б",
                            "в",
                            "г",
                            "д",
                            "е",
                            "ж",
                            "з",
                            "и",
                            "й",
                            "к",
                            "л",
                            "м",
                            "н",
                            "о",
                            "п",
                            "р",
                            "с",
                            "т",
                            "у",
                            "ф",
                            "х",
                            "ц",
                            "ч",
                            "ш",
                            "щ",
                            "ъ",
                            "ы",
                            "ь",
                            "э",
                            "ю",
                            "я",
                            "ё",
                            "–",
                            "—",
                            "№",
                        }
                    ),
                ],
                verbose_name="Описание шага",
            ),
        ),
        migrations.AlterField(
            model_name="recipestep",
            name="image",
            field=models.ImageField(
                blank=True,
                null=True,
                upload_to=recipes.utils.get_step_image_upload_path,
                verbose_name="Изображение",
            ),
        ),
        migrations.AlterField(
            model_name="recipestep",
            name="step_number",
            field=models.PositiveSmallIntegerField(
                validators=[
                    django.core.validators.MinValueValidator(1),
                    django.core.validators.MaxValueValidator(20),
                ],
                verbose_name="Номер шага",
            ),
        ),
        migrations.AddConstraint(
            model_name="recipeingredient",
            constraint=models.UniqueConstraint(
                fields=("recipe", "ingredient"), name="unique_ingredient_in_recipe"
            ),
        ),
        migrations.AddConstraint(
            model_name="recipestep",
            constraint=models.UniqueConstraint(
                fields=("recipe", "step_number"), name="unique_step_in_recipe"
            ),
        ),
        migrations.AddField(
            model_name="recipe",
            name="category",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="recipes",
                to="recipes.category",
                verbose_name="Категория",
            ),
        ),
        migrations.AddConstraint(
            model_name="recipe",
            constraint=models.UniqueConstraint(
                fields=("title", "description"), name="unique_recipe"
            ),
        ),
    ]
